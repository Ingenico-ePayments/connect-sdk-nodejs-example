<!DOCTYPE html>
<html lang="en">
<!--
   This file was auto-generated from the API references found at
   https://epayments-api.developer-ingenico.com/s2sapi/v1/
-->

<head>
  <title>Ingenico Node.js S2S example</title>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <style>
    .output-wrapper {
      display: none;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <h1>Node.js S2S SDK explorer</h1>
        <p>You can explore the various calls of the Node.js S2S SDK by clicking the method in the menu; the response will
          be rendered when the call finishes. This tool is for development use only and must never be made public.</p>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-md-3">
        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingHostedCheckouts">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseHostedCheckouts" aria-expanded="true" aria-controls="collapseHostedCheckouts">
                  Hosted Checkouts
                </a>
              </h4>
            </div>
            <div id="collapseHostedCheckouts" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingHostedCheckouts">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createHostedCheckout">Create hosted checkout</a></li>
                <li class="list-group-item"><a href="#" data-operation="getHostedCheckout">Get hosted checkout status</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingHostedMandateManagement">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseHostedMandateManagement" aria-expanded="true" aria-controls="collapseHostedMandateManagement">
                  Hosted Mandate Management
                </a>
              </h4>
            </div>
            <div id="collapseHostedMandateManagement" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingHostedMandateManagement">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createHostedMandateManagement">Create hosted mandate management</a></li>
                <li class="list-group-item"><a href="#" data-operation="getHostedMandateManagement">Get hosted mandate management</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingPayments">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsePayments" aria-expanded="true" aria-controls="collapsePayments">
                  Payments
                </a>
              </h4>
            </div>
            <div id="collapsePayments" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingPayments">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createPayment">Create payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="findPayments">Find payments</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPayment">Get payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="completePayment">Complete payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="getThirdPartyStatus">Third party status</a></li>
                <li class="list-group-item"><a href="#" data-operation="tokenizePayment">Create a token from payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="processChallengedPayment">Approves challenged payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="approvePayment">Approve payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="capturePayment">Capture payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelApprovalPayment">Undo capture payment request</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPaymentCaptures">Get captures of payment</a></li>
                <li class="list-group-item"><a href="#" data-operation="refundPayment">Create refund</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelPayment">Cancel payment</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingCaptures">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseCaptures" aria-expanded="true" aria-controls="collapseCaptures">
                  Captures
                </a>
              </h4>
            </div>
            <div id="collapseCaptures" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingCaptures">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="getCapture">Get capture</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingRefunds">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseRefunds" aria-expanded="true" aria-controls="collapseRefunds">
                  Refunds
                </a>
              </h4>
            </div>
            <div id="collapseRefunds" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingRefunds">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="findRefunds">Find refunds</a></li>
                <li class="list-group-item"><a href="#" data-operation="getRefund">Get refund</a></li>
                <li class="list-group-item"><a href="#" data-operation="approveRefund">Approve refund</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelRefund">Cancel refund</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelApprovalRefund">Undo approve refund</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingPayouts">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsePayouts" aria-expanded="true" aria-controls="collapsePayouts">
                  Payouts
                </a>
              </h4>
            </div>
            <div id="collapsePayouts" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingPayouts">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createPayout">Create payout</a></li>
                <li class="list-group-item"><a href="#" data-operation="findPayouts">Find payouts</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPayout">Get payout</a></li>
                <li class="list-group-item"><a href="#" data-operation="approvePayout">Approve payout</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelPayout">Cancel payout</a></li>
                <li class="list-group-item"><a href="#" data-operation="cancelApprovalPayout">Undo approve payout</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingProductGroups">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseProductGroups" aria-expanded="true" aria-controls="collapseProductGroups">
                  Product Groups
                </a>
              </h4>
            </div>
            <div id="collapseProductGroups" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingProductGroups">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="getPaymentProductGroups">Get payment product groups</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPaymentProductGroup">Get payment product group</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingProducts">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseProducts" aria-expanded="true" aria-controls="collapseProducts">
                  Products
                </a>
              </h4>
            </div>
            <div id="collapseProducts" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingProducts">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="getPaymentProducts">Get payment products</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPaymentProduct">Get payment product</a></li>
                <li class="list-group-item"><a href="#" data-operation="getDirectory">Get payment product directory</a></li>
                <li class="list-group-item"><a href="#" data-operation="getCustomerDetails">Get customer details</a></li>
                <li class="list-group-item"><a href="#" data-operation="getDeviceFingerprint">Get device fingerprint</a></li>
                <li class="list-group-item"><a href="#" data-operation="getNetworks">Get payment product networks</a></li>
                <li class="list-group-item"><a href="#" data-operation="getPaymentProductPublicKey">Get payment product specific public key</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingRiskAssessments">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseRiskAssessments" aria-expanded="true" aria-controls="collapseRiskAssessments">
                  Risk assessments
                </a>
              </h4>
            </div>
            <div id="collapseRiskAssessments" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingRiskAssessments">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="riskAssessmentBankAccount">Risk-assess bankaccount</a></li>
                <li class="list-group-item"><a href="#" data-operation="riskAssessmentCards">Risk-assess card</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingServices">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseServices" aria-expanded="true" aria-controls="collapseServices">
                  Services
                </a>
              </h4>
            </div>
            <div id="collapseServices" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingServices">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="convertAmount">Convert amount</a></li>
                <li class="list-group-item"><a href="#" data-operation="convertBankAccount">Convert bankaccount</a></li>
                <li class="list-group-item"><a href="#" data-operation="iinDetails">Get IIN details</a></li>
                <li class="list-group-item"><a href="#" data-operation="testConnection">Test connection</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingTokens">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTokens" aria-expanded="true" aria-controls="collapseTokens">
                  Tokens
                </a>
              </h4>
            </div>
            <div id="collapseTokens" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTokens">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createToken">Create token</a></li>
                <li class="list-group-item"><a href="#" data-operation="getToken">Get token</a></li>
                <li class="list-group-item"><a href="#" data-operation="updateToken">Update token</a></li>
                <li class="list-group-item"><a href="#" data-operation="deleteToken">Delete token</a></li>
                <li class="list-group-item"><a href="#" data-operation="approveSepaDirectDebitToken">Approve SEPA DD mandate</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingMandates">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseMandates" aria-expanded="true" aria-controls="collapseMandates">
                  Mandates
                </a>
              </h4>
            </div>
            <div id="collapseMandates" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingMandates">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createMandate">Create mandate</a></li>
                <li class="list-group-item"><a href="#" data-operation="createMandateWithReference">Create mandate with mandatereference</a></li>
                <li class="list-group-item"><a href="#" data-operation="getMandate">Get mandate</a></li>
                <li class="list-group-item"><a href="#" data-operation="blockMandate">Block mandate</a></li>
                <li class="list-group-item"><a href="#" data-operation="unblockMandate">Unblock mandate</a></li>
                <li class="list-group-item"><a href="#" data-operation="revokeMandate">Revoke mandate</a></li>
              </ul>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingSessions">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSessions" aria-expanded="true" aria-controls="collapseSessions">
                  Sessions
                </a>
              </h4>
            </div>
            <div id="collapseSessions" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSessions">
              <ul class="list-group">
                <li class="list-group-item"><a href="#" data-operation="createSession">Create session</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-md-9 output-wrapper">
        <p>Status: <span id="outputStatusCode"></span>, Roundtrip: <span id="roundTrip"></span> ms</p>
        <pre id="output"></pre>
      </div>
    </div>
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="themodal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Enter input</h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal" id="inputs">
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="sendOverlay">Send</button>
        </div>
      </div>
    </div>
  </div>

  <script src="//code.jquery.com/jquery-2.2.2.min.js" integrity="sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI=" crossorigin="anonymous"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script>
    $(function () {
      var clicked = {};

      // initial values for query parameters
      var inputValues = {
        currencyCode: 'EUR',
        countryCode: 'NL',
        locale: 'en_GB',
        amount: 1000,
        isRecurring: true,
        source: 'USD',
        target: 'EUR',
        mandateCancelDate: '20160503',
        offset: 0,
        limit: 10
      };

      var operations = {};
      operations.createHostedCheckout = {
        href: '/hostedcheckouts/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.getHostedCheckout = {
        href: '/hostedcheckouts/get',
        uriParameters: [ 'hostedCheckoutId' ],
        queryParameters: [  ],
      };
      operations.createHostedMandateManagement = {
        href: '/hostedmandatemanagements/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.getHostedMandateManagement = {
        href: '/hostedmandatemanagements/get',
        uriParameters: [ 'hostedMandateManagementId' ],
        queryParameters: [  ],
      };
      operations.createPayment = {
        href: '/payments/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.findPayments = {
        href: '/payments/find',
        uriParameters: [  ],
        queryParameters: [ 'merchantReference', 'merchantOrderId', 'offset', 'limit' ],
      };
      operations.getPayment = {
        href: '/payments/get',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.completePayment = {
        href: '/payments/complete',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.getThirdPartyStatus = {
        href: '/payments/thirdPartyStatus',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.tokenizePayment = {
        href: '/payments/tokenize',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.processChallengedPayment = {
        href: '/payments/processchallenged',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.approvePayment = {
        href: '/payments/approve',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.capturePayment = {
        href: '/payments/capture',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.cancelApprovalPayment = {
        href: '/payments/cancelapproval',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.getPaymentCaptures = {
        href: '/payments/captures',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.refundPayment = {
        href: '/payments/refund',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.cancelPayment = {
        href: '/payments/cancel',
        uriParameters: [ 'paymentId' ],
        queryParameters: [  ],
      };
      operations.getCapture = {
        href: '/captures/get',
        uriParameters: [ 'captureId' ],
        queryParameters: [  ],
      };
      operations.findRefunds = {
        href: '/refunds/find',
        uriParameters: [  ],
        queryParameters: [ 'merchantReference', 'merchantOrderId', 'offset', 'limit' ],
      };
      operations.getRefund = {
        href: '/refunds/get',
        uriParameters: [ 'refundId' ],
        queryParameters: [  ],
      };
      operations.approveRefund = {
        href: '/refunds/approve',
        uriParameters: [ 'refundId' ],
        queryParameters: [  ],
      };
      operations.cancelRefund = {
        href: '/refunds/cancel',
        uriParameters: [ 'refundId' ],
        queryParameters: [  ],
      };
      operations.cancelApprovalRefund = {
        href: '/refunds/cancelapproval',
        uriParameters: [ 'refundId' ],
        queryParameters: [  ],
      };
      operations.createPayout = {
        href: '/payouts/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.findPayouts = {
        href: '/payouts/find',
        uriParameters: [  ],
        queryParameters: [ 'merchantReference', 'merchantOrderId', 'offset', 'limit' ],
      };
      operations.getPayout = {
        href: '/payouts/get',
        uriParameters: [ 'payoutId' ],
        queryParameters: [  ],
      };
      operations.approvePayout = {
        href: '/payouts/approve',
        uriParameters: [ 'payoutId' ],
        queryParameters: [  ],
      };
      operations.cancelPayout = {
        href: '/payouts/cancel',
        uriParameters: [ 'payoutId' ],
        queryParameters: [  ],
      };
      operations.cancelApprovalPayout = {
        href: '/payouts/cancelapproval',
        uriParameters: [ 'payoutId' ],
        queryParameters: [  ],
      };
      operations.getPaymentProductGroups = {
        href: '/productgroups/find',
        uriParameters: [  ],
        queryParameters: [ 'countryCode', 'currencyCode', 'locale', 'amount', 'isRecurring', 'hide' ],
      };
      operations.getPaymentProductGroup = {
        href: '/productgroups/get',
        uriParameters: [ 'paymentProductGroupId' ],
        queryParameters: [ 'countryCode', 'currencyCode', 'locale', 'amount', 'isRecurring', 'hide' ],
      };
      operations.getPaymentProducts = {
        href: '/products/find',
        uriParameters: [  ],
        queryParameters: [ 'countryCode', 'currencyCode', 'locale', 'amount', 'isRecurring', 'hide' ],
      };
      operations.getPaymentProduct = {
        href: '/products/get',
        uriParameters: [ 'paymentProductId' ],
        queryParameters: [ 'countryCode', 'currencyCode', 'locale', 'amount', 'isRecurring', 'hide', 'forceBasicFlow' ],
      };
      operations.getDirectory = {
        href: '/products/directory',
        uriParameters: [ 'paymentProductId' ],
        queryParameters: [ 'countryCode', 'currencyCode' ],
      };
      operations.getCustomerDetails = {
        href: '/products/customerDetails',
        uriParameters: [ 'paymentProductId', 'fiscalNumber' ],
        queryParameters: [  ],
      };
      operations.getDeviceFingerprint = {
        href: '/products/deviceFingerprint',
        uriParameters: [ 'paymentProductId' ],
        queryParameters: [  ],
      };
      operations.getNetworks = {
        href: '/products/networks',
        uriParameters: [ 'paymentProductId' ],
        queryParameters: [ 'countryCode', 'currencyCode', 'amount', 'isRecurring' ],
      };
      operations.getPaymentProductPublicKey = {
        href: '/products/publicKey',
        uriParameters: [ 'paymentProductId' ],
        queryParameters: [  ],
      };
      operations.riskAssessmentBankAccount = {
        href: '/riskassessments/bankaccounts',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.riskAssessmentCards = {
        href: '/riskassessments/cards',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.convertAmount = {
        href: '/services/convertAmount',
        uriParameters: [  ],
        queryParameters: [ 'source', 'target', 'amount' ],
      };
      operations.convertBankAccount = {
        href: '/services/bankaccount',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.iinDetails = {
        href: '/services/getIINdetails',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.testConnection = {
        href: '/services/testconnection',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.createToken = {
        href: '/tokens/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.getToken = {
        href: '/tokens/get',
        uriParameters: [ 'tokenId' ],
        queryParameters: [  ],
      };
      operations.updateToken = {
        href: '/tokens/update',
        uriParameters: [ 'tokenId' ],
        queryParameters: [  ],
      };
      operations.deleteToken = {
        href: '/tokens/delete',
        uriParameters: [ 'tokenId' ],
        queryParameters: [ 'mandateCancelDate' ],
      };
      operations.approveSepaDirectDebitToken = {
        href: '/tokens/approvesepadirectdebit',
        uriParameters: [ 'tokenId' ],
        queryParameters: [  ],
      };
      operations.createMandate = {
        href: '/mandates/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };
      operations.createMandateWithReference = {
        href: '/mandates/createWithMandateReference',
        uriParameters: [ 'uniqueMandateReference' ],
        queryParameters: [  ],
      };
      operations.getMandate = {
        href: '/mandates/get',
        uriParameters: [ 'uniqueMandateReference' ],
        queryParameters: [  ],
      };
      operations.blockMandate = {
        href: '/mandates/block',
        uriParameters: [ 'uniqueMandateReference' ],
        queryParameters: [  ],
      };
      operations.unblockMandate = {
        href: '/mandates/unblock',
        uriParameters: [ 'uniqueMandateReference' ],
        queryParameters: [  ],
      };
      operations.revokeMandate = {
        href: '/mandates/revoke',
        uriParameters: [ 'uniqueMandateReference' ],
        queryParameters: [  ],
      };
      operations.createSession = {
        href: '/sessions/create',
        uriParameters: [  ],
        queryParameters: [  ],
      };

      var doSend = function (operation, params) {
        var url = operation.href;
        var start = new Date().getTime();
        if (params) {
          $.each(operation.uriParameters, function (index, param) {
            var value = typeof params[param] === 'undefined' ? '' : params[param];
            url = url + '/' + value;
          });
          $.each(operation.queryParameters, function (index, param) {
            var value = typeof params[param] === 'undefined' ? '' : params[param];
            if (value !== '') {
              var separator = url.indexOf('?') == -1 ? '?' : '&';
              url = url + separator + param + '=' + encodeURI(value);
            }
          });
        }
        $('.output-wrapper').show();
        $('#output').text('Loading ...');
        $('#roundTrip').text('-');
        $('#outputStatusCode').text('Loading ...');
        $.getJSON(url, function (json) {
          $('#output').text(JSON.stringify(json, null, '  '));
        }).fail(function (error) {
          $('#output').text(JSON.stringify(error.responseJSON, null, '  '));
        }).always(function(jqxhr, textStatus, _jqxhr) {
          if (textStatus === 'success' || textStatus === 'nocontent') {
            // the always callback has parameters based on the statusText
            // jqXHR.always(function( data|jqXHR, textStatus, jqXHR|errorThrown ) { });
            // so if the status is 'success' I copy the jqxhr.
            jqxhr = _jqxhr;
          }
          $('#outputStatusCode').text(jqxhr.status + ' ' + jqxhr.statusText);
          $('#roundTrip').text(new Date().getTime() - start);
        });
      };

      $('a[data-operation]').click(function (e) {
        e.preventDefault();
        var operation = operations[$(this).data('operation')];
        var properties = operation.uriParameters.concat(operation.queryParameters);
        if (properties.length > 0) {
          // fill popup
          clicked = operation;

          // store existing input values
          $('#inputs input').each(function (index, input) {
            inputValues[$(input).data('key')] = $(input).val();
          });
          // re-create input modal content
          var $inputs = $('#inputs').empty();
          $.each(properties, function (index, property) {
            var id = 'i' + (index + 1);
            var prop = property.trim();
            var $label = $('<label>').attr('for', id).addClass('col-sm-3 control-label').text(prop);
            var $input = $('<input>').attr({ 'type': 'text', 'id': id, 'placeholder': prop }).addClass('form-control').data('key', prop).val(inputValues[prop]);
            var $formGroup = $('<div>').addClass('form-group').append($label).append($('<div>').addClass('col-sm-9').append($input));
            $inputs.append($formGroup);
          });

          $('#themodal').modal({backdrop: 'static'});
        } else {
          doSend(operation);
        }
      });

      $('#themodal').on('shown.bs.modal', function () {
        $('#inputs #i1').focus();
      });

      $('#inputs').on('keydown', 'input', function (e) {
        if (e.which == 13) {
          e.preventDefault();
          $('#sendOverlay').click();
        }
      });

      $('#sendOverlay').on('click', function (e) {
        var params = {};
        $('#inputs input').each(function (index, input) {
          params[$(input).attr('placeholder')] = $(input).val();
        });
        doSend(clicked, params);
        $('#themodal').modal('hide');
      });
    });
  </script>
</body>
</html>
